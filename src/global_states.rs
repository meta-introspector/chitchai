// TODO: manage global states in a more structured way here